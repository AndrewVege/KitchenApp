<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wycena kuchni</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 antialiased">
  <div id="app" class="px-4 py-6 max-w-4xl mx-auto bg-white shadow-lg rounded-lg">
    <h1 class="text-3xl font-bold mb-6 text-center">Wycena kuchni</h1>

    <!-- wybór szafek -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6">
      <div>
        <label class="block mb-1 font-medium">Grupa</label>
        <select id="groupSelect" class="w-full border rounded p-2 focus:ring-2 focus:ring-blue-300"></select>
      </div>
      <div>
        <label class="block mb-1 font-medium">Szafka</label>
        <select id="itemSelect" class="w-full border rounded p-2 focus:ring-2 focus:ring-blue-300"></select>
      </div>
      <div class="flex items-end">
        <button id="addBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 rounded transition">
          Dodaj szafkę
        </button>
      </div>
    </div>

    <!-- lista dodanych szafek -->
    <ul id="cabinetList" class="space-y-2 mb-6"></ul>

    <!-- opcje dodatkowe -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
      <div>
        <label class="block mb-1 font-medium">Fronty</label>
        <select id="frontSelect" class="w-full border rounded p-2 focus:ring-2 focus:ring-blue-300">
          <option value="laminowane">Laminowane</option>
          <option value="lakierowane">Lakierowane</option>
          <option value="frezowane">Frezowane</option>
        </select>
      </div>
      <div>
        <label class="block mb-1 font-medium">Blat</label>
        <select id="blatSelect" class="w-full border rounded p-2 focus:ring-2 focus:ring-blue-300">
          <option value="laminat">Laminat</option>
          <option value="kompaktowy">Kompaktowy</option>
          <option value="kamien">Kamień</option>
          <option value="drewniany">Drewniany</option>
        </select>
      </div>
      <div class="flex items-center">
        <input type="checkbox" id="ledCheckbox" class="mr-2 h-5 w-5"/>
        <label for="ledCheckbox" class="font-medium">Oświetlenie LED</label>
      </div>
      <div class="flex items-center">
        <input type="checkbox" id="lowerBoxCheckbox" class="mr-2 h-5 w-5"/>
        <label for="lowerBoxCheckbox" class="font-medium">Bok dolny schodzący</label>
      </div>
      <div class="flex items-center">
        <input type="checkbox" id="islandSidesCheckbox" class="mr-2 h-5 w-5"/>
        <label for="islandSidesCheckbox" class="font-medium">Boki wyspy</label>
      </div>
    </div>

    <!-- podsumowanie -->
    <div id="summary" class="border-t pt-4 space-y-1 text-sm mb-6"></div>

    <!-- formularz kontaktowy -->
    <div class="border-t pt-6">
      <h2 class="text-xl font-semibold mb-4">Zapytaj o szczegóły</h2>
      <form id="contactForm" class="space-y-4">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <input type="text" id="name" placeholder="Imię i nazwisko" required
                 class="w-full border rounded p-2 focus:ring-2 focus:ring-gray-300"/>
          <input type="email" id="email" placeholder="Twój email" required
                 class="w-full border rounded p-2 focus:ring-2 focus:ring-gray-300"/>
        </div>
        <textarea id="message" rows="4" placeholder="Twoja wiadomość"
                  class="w-full border rounded p-2 focus:ring-2 focus:ring-gray-300"></textarea>
        <button type="submit"
                class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 rounded transition">
          Wyślij zapytanie
        </button>
        <p id="contactFeedback" class="text-sm text-green-600 hidden">Dziękujemy! Twoje zapytanie zostało wysłane.</p>
      </form>
    </div>
  </div>

  <script>
    // ---- dane i stałe ----
    const CABINET_GROUPS = {/* ... jak poprzednio ... */};
    const FRONT_MULTIPLIERS = {/* ... */};
    const BLAT_COSTS = {/* ... */};
    const TRANSPORT_COST = 400;
    const BOK_COST = 300;
    let cabinets = [];

    // ---- elementy DOM ----
    const groupSelect = document.getElementById("groupSelect");
    const itemSelect  = document.getElementById("itemSelect");
    const addBtn      = document.getElementById("addBtn");
    const listEl      = document.getElementById("cabinetList");
    const frontSel    = document.getElementById("frontSelect");
    const blatSel     = document.getElementById("blatSelect");
    const ledChk      = document.getElementById("ledCheckbox");
    const lowerChk    = document.getElementById("lowerBoxCheckbox");
    const islandChk   = document.getElementById("islandSidesCheckbox");
    const summaryEl   = document.getElementById("summary");
    const form        = document.getElementById("contactForm");
    const feedback    = document.getElementById("contactFeedback");

    // ---- funkcje renderujące ----
    function populateGroups() {
      groupSelect.innerHTML = "";
      Object.entries(CABINET_GROUPS).forEach(([k,v])=>{
        groupSelect.add(new Option(v.label, k));
      });
      populateItems();
    }
    function populateItems(){
      itemSelect.innerHTML = "";
      const items = CABINET_GROUPS[groupSelect.value].items;
      Object.entries(items).forEach(([k,v])=>{
        itemSelect.add(new Option(v.name, k));
      });
    }
    function renderList() {
      listEl.innerHTML = "";
      cabinets.forEach((c,i)=>{
        const li = document.createElement("li");
        li.className = "flex items-center justify-between";
        li.innerHTML = `
          <span>${c.name} (${c.qty})</span>
          <input type="number" min="1" value="${c.qty}" class="w-16 border rounded p-1"/>
          <button class="text-red-600">Usuń</button>
        `;
        li.querySelector("input").onchange = e=>{ c.qty=+e.target.value; renderSummary(); };
        li.querySelector("button").onclick = ()=>{ cabinets.splice(i,1); renderList(); renderSummary(); };
        listEl.append(li);
      });
    }
    function renderSummary(){
      const totalLen = cabinets.reduce((s,c)=>s + (c.length||0)*c.qty,0);
      const wyspaLen = cabinets.filter(c=>c.group==="wyspa")
                        .reduce((s,c)=>s + (c.length||0)*c.qty,0);
      const pozLen = totalLen - wyspaLen;
      const costSzaf = cabinets.reduce((s,c)=>s + c.price*c.qty,0);
      const frontExtra = costSzaf*(FRONT_MULTIPLIERS[frontSel.value]-1);
      const costBlat = pozLen*BLAT_COSTS[blatSel.value] + wyspaLen*BLAT_COSTS[blatSel.value]*(1000/600);
      const costLed = ledChk.checked ? cabinets.filter(c=>c.group==="wiszace").length*100 : 0;
      const costLower = lowerChk.checked ? BOK_COST : 0;
      const costIsland= islandChk.checked ? 2*BOK_COST : 0;
      const mont = costSzaf*0.15 < 1500 ? 1500 : costSzaf*0.15;
      const total = costSzaf + frontExtra + costBlat + costLed + TRANSPORT_COST + mont + costLower + costIsland;

      summaryEl.innerHTML = `
        <p>Długość blatów (pozostała): <strong>${pozLen.toFixed(2)} m</strong></p>
        <p>Długość blatów (wyspa): <strong>${wyspaLen.toFixed(2)} m</strong></p>
        <p>Koszt szafek: <strong>${costSzaf.toFixed(2)} zł</strong></p>
        <p>Dopłata za fronty: <strong>${frontExtra.toFixed(2)} zł</strong></p>
        <p>Koszt blatów: <strong>${costBlat.toFixed(2)} zł</strong></p>
        <p>Koszt LED: <strong>${costLed.toFixed(2)} zł</strong></p>
        <p>Transport: <strong>${TRANSPORT_COST} zł</strong></p>
        <p>Montaż (15%, min 1500): <strong>${mont.toFixed(2)} zł</strong></p>
        <p>Bok dolny: <strong>${costLower.toFixed(2)} zł</strong></p>
        <p>Boki wyspy: <strong>${costIsland.toFixed(2)} zł</strong></p>
        <hr class="my-2"/>
        <p class="text-lg font-bold">Łącznie: ${total.toFixed(2)} zł</p>
      `;
    }

    // ---- inicjalizacja ----
    populateGroups();
    renderList();
    renderSummary();

    // reaktywność opcji
    [frontSel, blatSel, ledChk, lowerChk, islandChk].forEach(el=>el.onchange=renderSummary);
    groupSelect.onchange = ()=>{ populateItems(); renderList(); renderSummary(); };

    // ---- obsługa formularza ----
    form.onsubmit = e=> {
      e.preventDefault();
      // tu normalnie wysyłka AJAX-em albo mailto:
      feedback.classList.remove("hidden");
      form.reset();
      setTimeout(()=>feedback.classList.add("hidden"), 5000);
    };
  </script>
</body>
</html>
